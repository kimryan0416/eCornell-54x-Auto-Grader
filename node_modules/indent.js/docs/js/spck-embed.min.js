!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.SpckEditor=t()}(this,function(){var e=function(e,t){if("string"==typeof e)this.element=document.querySelector(e);else{if(n=e,!("object"==typeof Node?n instanceof Node:n&&"object"==typeof n&&"number"==typeof n.nodeType&&"string"==typeof n.nodeName))throw new Error('Argument "element" must be a selector string or a HTMLElement.');this.element=e}var n;if(!((e=this.element)&&e.contentWindow&&e.contentWindow.postMessage))throw new Error('Argument "element" must be an IFRAME element.');this.contentWindow=e.contentWindow,this.origin=t||"https://embed.spck.io"};return e.prototype={connect:function(t,n,e){var o=(e=e||{}).maxTries||10,i=e.interval||500,r=this.origin,s=this.contentWindow;n=n||function(e){throw new Error(e.message)};var a=0,c=setInterval(function(){if(o<=a)return clearInterval(c),void n({id:1,message:"Connection to iframe window failed: maximum tries exceeded."});var e;a++;try{e=new MessageChannel}catch(e){return clearInterval(c),void n({id:2,message:"MessageChannel not supported."})}e.port1.onmessage=function(e){"connected"==e.data&&(clearInterval(c),t&&t(a))};try{s.postMessage("connect",r,[e.port2])}catch(e){}},i)},configure:function(e){this.contentWindow.postMessage(e,this.origin)},getText:function(e){var t=new MessageChannel;t.port1.onmessage=e,this.contentWindow.postMessage("text",this.origin,[t.port2])}},e});